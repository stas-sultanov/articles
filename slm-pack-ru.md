Выбор средств обеспечения жизненного цикла решений
--------------------------------------------------
> Жизненный цикл решения - совокупность стадий, которые проходит решение за период своего существования начиная от момента возникновения идеи до утилизации.

> Средства обеспечения жизненного цикла решений - совокупность программ и сервисов, которые используются членами команды в рамках жизненного цикла решений.

Всем привет!

Меня зовут Стас и я работаю в IT.

По работе мне часто приходится инициировать старт проектов. При старте проекта важным шагом является выбор средств обеспечения жизненного цикла решения. На данном шаге необходимо решить какие именно средства команда будут использовать для создания, поддержки и развития решения.

Также довольно часто приходится присоединиться к уже идущему проекту, который стартовали на чем было, и он имеет определённые проблемы со средствами обеспечения жизненного цикла. На таких проектах обычно становится вопрос частичной или кардинальной смены инструментария.

По причине того, что приходится каждый раз тратить время на объяснение членам команды что и почему будет использовано в конкретном проекте я решил написать данную статью.

Статья в основном ориентирована на аутсорсинг, коим большинство Украинского ИТ и является, однако вполне и применима для продуктовых компаний.

И в основном касается mature аутсорсинг компаний, которые ставят перед собой цели предлагать максимально качественный сервис для своих клиентов.

Многие термины умышлено оставлены на английском языке потому как перевод становится бессмысленным.

Категории средств
-----------------

Для начала давайте определимся с категориями и ролями средств, используемых для
обеспечения жизненного цикла. В среднем набор выглядит следующим образом:

| Категория               | Роль 
|-------------------------|--------
| Auth                    | Централизованная аутентификация и авторизация пользователей, сервисов и приложений.</br>Все другие средства интегрируются с этим.
| Communication           | Коммуникации внутри комнды<br/>Коммуникации на основе чатов с возможностью проведения видео звонков и их записью, индексированием и поиском по ключевым словам.
| Knowledge Sharing       | Расшаривание знаний о проекте между всеми участниками команды.</br>На основе де-факто индустриального стандарта [Markdown](https://en.wikipedia.org/wiki/Markdown).
| Requirements Management | Управление и визуализация требованиями.</br>Например Scrum backlog и Kanban board.
| Repos                   | Хранение исходников и контроль версий.<br/>Например, реализация [Git](https://en.wikipedia.org/wiki/Git).
| Pipelines               | Сборка и управление выпусками.
| Artifacts               | Хранение артефактов</br>Например [Debug Symbols](https://en.wikipedia.org/wiki/Debug_symbol), [NuGet](https://en.wikipedia.org/wiki/NuGet), [NPM](https://en.wikipedia.org/wiki/Npm_(software)), [Maven](https://en.wikipedia.org/wiki/Apache_Maven) и т.д.
| Test                    | Функциональное тестирование.
| Test Load               | Нагрузочное тестирование.
| Monitor                 | Мониторинг решения и предиктивная аналитики.
| Feedback                | Сбор отзывов о использовании решения.
| IDE                     | Среда разработки.</br>Из коробки интегрированная со всеми системами.

Внезапно перечень получается весьма внушительным это, не говоря уже о возможных дополнительных системах специализированных для создания скетчей и т.д.

Размещение
----------

Обычно по условиям контрактов, которые мало кто читает, между *заказчиком* и *исполнителем* - абсолютно все артефакты, порождённые во время жизненного цикла решения, принадлежат заказчику. В данном случае артефакты — это документация, требования, код, собранные приложение, тесты и т.д.

Рассмотрим следующие варианты размещения:

**Размещение на стороне исполнителя (on-prem)**

-   **Плюс:**
    -   Некоторые инструменты могут быть уже развёрнуты и настроены.
-   **Минус:**
    -   Требуется обязательно заложить процесс передачи артефактов на сторону заказчика, а это требует наличия идентичного набора развёрнутых сервисов на стороне клиента.
    -   Крайне редки случаи, когда все инструменты есть на стороне исполнителя.
    -   Затраты на лицензирование закладываются в стоимость услуг, и оплата возлагается на исполнителя.
    -   Требуется организовать доступ членам команды со стороны заказчика к инфраструктуре, сервисам и система которые на стороне исполнителя.
    -   Требуются затраты на поддержку и обновление ПО и железа.

**Размещение на стороне заказчика (on-prem)**

-   **Плюс:**
    -   Нет необходимости передавать артефакты.
    -   Клиент сам платит за лицензии.
-   **Минус:**
    -   Крайне редки случаи, когда все инструменты есть на стороне клиента.
    -   Будьте готовы к проблемам с получением доступа к инфраструктуре,
        системам и сервисам.
    -   Требуются затраты на поддержку и обновление ПО и железа.

**Размещение на третьей стороне (service)**

-   **Плюс:**
    -   Все артефакты принадлежат клиенту через договор оказания услуг с третьим
        лицом
-   **Минус:**
    -   Возможны случаи паранойи с обеих сторон.

**Смешанные варианты:** естественно не исключены смешанные варианты, но как правило они обладают минусами всех вышеперечисленных.

Лично я всегда стараюсь продвинуть вариант использования облачных сервисов и только в исключительных ситуациях размещение на стороне клиента.

Средства
--------

В общем, есть 2 варианта получения набора средств:

-   собрать из разных инструментов от разных поставщиков.
-   использовать решение от одного поставщика.

Это как будто вам нужна машина, чтобы ездить, и вы можете купить её или взять в аренду и ездить сразу, или вы можете купить запчасти потрать огромное количество
времени и денег и собрать из них [папелац](https://ru.wikipedia.org/wiki/%D0%9F%D0%B5%D0%BF%D0%B5%D0%BB%D0%B0%D1%86).

Естественно, что на рынке существует огромное количество предложений, и возможных вариантов использования в пазличных комбинациях - огромное множество.
В данной статье я рассматриваю именно те средства и в той комбинации, которые мне больше всего встречались по ходу работы.

-   Вариант A - на основе сервисов и продуктов компании [Atlassian](https://www.atlassian.com/), иногда упоминается как *Atlassian Stack*.
-   Вариант M - на базе сервисов и продуктов Microsoft, в основе которого лежит пакет сервисов [Azure DevOps](https://azure.microsoft.com/en-us/services/devops). До недавнего времени являлся одним продуктом Visual Studio Team Services. Имеет версию доступную on-prem. Все сервисы так или иначе размещаются воблаке Azure.

Стоит упомянуть, что в целом даже на энтерпрайзных проектах на много денег существует определённые проблемы получения бюджета на системы для обеспечения жизненного цикла.
Нет проблем тратить каждый месяц много тысяч денег на компенсации членам команды, зато практически всегда начинаются вопросы про сотню другую денег для оплаты средств обеспечения жизненного цикла.

Следующая таблица описывает какие конкретно средства и по какой стоимости в месяц входят в вышеперечисленные варианты:

| Area                    | Option A Tool | Cost | Option M Tool | Cost
|:------------------------|:--------------|:-----|:--------------|:-----
| Auth                    | [G Suit](https://confluence.atlassian.com/cloud/security-with-g-suite-938859740.html) | ??? | [Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/) | free: basic<br/>extra: [$1/user](https://azure.microsoft.com/en-us/pricing/details/active-directory/)
| Knowledge Sharing       | [Atlassian Confluence](https://www.atlassian.com/software/confluence) |\<10 users: $10<br/>\>10 users: [$5/user](https://www.atlassian.com/software/confluence/pricing) | [Wiki](https://azure.microsoft.com/en-us/services/devops/wiki/) |free: 5 users<br/>extra: [$6/user](https://marketplace.visualstudio.com/items?itemName=ms.vss-vstsuser#pricing)
| Requirements Management | [Atlassian Jira](https://jira.atlassian.com/) |\<10 users: $10<br/>\>10 users: [$7/user](https://www.atlassian.com/software/jira/pricing) | [Boards](https://azure.microsoft.com/en-us/services/devops/boards/) | Included
| Repos                   | [Atlassian Bitbucket](https://www.atlassian.com/software/bitbucket) |\<5 users: free<br/>\>5 users: [$5/user](https://www.atlassian.com/software/bitbucket/pricing?tab=cloud)| [Repos](https://azure.microsoft.com/en-us/services/devops/repos/) | Included
| Pipelines               | [Jenkins](https://jenkins.io/) | \*1 | [Pipelines](https://azure.microsoft.com/en-us/services/devops/pipelines/) | free: 1<br/>extra: [$40/pipe](https://marketplace.visualstudio.com/items?itemName=ms.build-release-hosted-pipelines#pricing)
| Artifacts               | [MyGet](https://www.myget.org) | 5 feeds: [$40/month](https://www.myget.org/pricing) | [Artifacts](https://azure.microsoft.com/en-us/services/devops/artifacts/) | free: 5 users<br/>extra: [$4/user](https://marketplace.visualstudio.com/items?itemName=ms.feed#pricing)
| Test                    | [Gurock TestRail](http://www.gurock.com/testrail/) | [$30/user](http://www.gurock.com/testrail/pricing/cloud/) | [Test Plans](https://azure.microsoft.com/en-us/services/devops/test-plans/) | [$52/user](https://marketplace.visualstudio.com/items?itemName=ms.vss-testmanager-web#pricing)
| Test Load               | [Load Impact](https://loadimpact.com/) | [$300](https://loadimpact.com/pricing) | [Load Tests](https://docs.microsoft.com/en-us/azure/devops/test/load-test/get-started-simple-cloud-load-test?view=vsts) | free: 20k<br/>extra: [$36/100k](https://docs.microsoft.com/en-us/vsts/billing/buy-load-testing-vs#_buy-load-testing)

Как можно заметить некоторые Area не описанные, это сделано с целью упрощения. Потому как выбор тех же Communication сервисов это ещё одна статься такого же размера.

### Сравнение вариантов по аспектам

Давайте сравним оба варианта по следующим аспектам:

| Area               | Вариант A | Вариант M
|--------------------|-----------|----------
| Price & Payment    | Отдельная покупка каждого сервиса у разных поставщиков.</br>Отдельные счета-фактуры в конце месяца.</br>Совокупная стоимость владения **больше**, чем решение 'все в одном'.| Все услуги приобретаются у одного поставщика в виде пакета.</br>**Один счёт-фактура** в конец месяца.</br>Совокупная стоимость владения **меньше**, чем у отдельных систем.
| Legal              | Требуется принять **различные политики** от каждого поставщика. | Требуется принять только **одну политику** от одного поставщика.
| Auth               | Интеграция продуктов с централизованной системой аутентификации требует дополнительных затрат. | Интегрирован с Azure Active Directory и имеет [B2B Collaboration](https://docs.microsoft.com/en-us/azure/active-directory/b2b/what-is-b2b) **из коробки**.
| Service Management | Хоть большинство сервисов являются управляемыми, некоторые, такие как Jenkins, **требуют дополнительной инфраструктуры, настройки и поддержки.** | Все сервисы **управляемые**.
| Traceability       | Требуются **дополнительные расходы** на покупку и интеграцию плагинов. | Доступна **из коробки.**

### Сценарии использования

Чтобы дать представление о приблизительной стоимости владения, ниже приведены несколько сценариев использования.

* Stakeholders работают только с требованиями.
* Все члены команды за исключением Stakeholder исполььзуют систему для тестов.
* Стоиомсть Pipeline Agents, Artifacts, Load Tests не включены.
* Стоимость **опции M** может быть уменьшена, если члены команды имеют [Visual Studio Subscription](https://www.visualstudio.com/vs/pricing/).

***Scenario 1***
Команда малого размера: 3 stakeholders, 5 dev/op, 1 tester.

|               | 3х stakeholder |  5х dev/op |  1х test |    Totoal |
|:--------------|---------------:|-----------:|---------:|----------:|
| **Option A**  |                |            |          |  **$280** |
| Confluence    |                |            |          |       $10 |
| Jira          |            $30 |        $50 |      $10 |       $90 |
| Bitbucket     |                |        $25 |       $5 |       $30 |
| TestRail      |                |       $150 |      $50 |      $180 |
| **Option M**  |                |            |          |   **$58** |
| Wiki & Boards |                |            |       $6 |        $6 |
| Repos         |                |            | Included |        $0 |
| Test          |                |            |      $52 |       $52 |

***Scenario 2***
Комадна среднего размера: 5 stakeholders, 20 dev/op, 5 testers.

|               | 3х stakeholder | 20х dev/op |  5х test |    Totoal |
|:--------------|---------------:|-----------:|---------:|----------:|
| **Option A**  |                |            |          | **$1085** |
| Confluence    |            $25 |       $100 |      $25 |      $150 |
| Jira          |            $35 |       $140 |      $35 |      $210 |
| Bitbucket     |                |       $100 |      $25 |      $125 |
| TestRail      |                |            |          |      $600 |
| **Option M**  |                |            |          |  **$410** |
| Wiki & Boards |                |       $150 | Included |      $150 |
| Repos         |                |   Included | Included |        $0 |
| Test          |                |            |     $260 |      $260 |

## Заключение:
Когда предлагаете использовать какие-либо средства будьте готовы нести персональну ответсвенность.
